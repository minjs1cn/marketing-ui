import{c as t,a as e,d as n,b as i,R as o,F as r,e as s,r as u,o as a,T as c,f as l,g as h}from"./vendor.4fe08a48.js";let f;const d={},p=function(t,e){if(!e)return t();if(void 0===f){const t=document.createElement("link").relList;f=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in d)return;d[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":f,e||(i.as="script",i.crossOrigin=""),i.href=t,document.head.appendChild(i),e?new Promise(((t,e)=>{i.addEventListener("load",t),i.addEventListener("error",e)})):void 0}))).then((()=>t()))},m={"./views/components/Coating/index.tsx":()=>p((()=>import("./index.213c5ce5.js")),["/marketing-ui/assets/index.213c5ce5.js","/marketing-ui/assets/index.81c97e73.css","/marketing-ui/assets/vendor.4fe08a48.js"]),"./views/components/Grids/index.tsx":()=>p((()=>import("./index.783a146d.js")),["/marketing-ui/assets/index.783a146d.js","/marketing-ui/assets/index.e15b167f.css","/marketing-ui/assets/vendor.4fe08a48.js"]),"./views/components/TurnTable/index.tsx":()=>p((()=>import("./index.345ddf55.js")),["/marketing-ui/assets/index.345ddf55.js","/marketing-ui/assets/index.e2961d46.css","/marketing-ui/assets/vendor.4fe08a48.js","/marketing-ui/assets/useRotate.9fd7a603.js"]),"./views/components/Wheel/index.tsx":()=>p((()=>import("./index.c0e1394e.js")),["/marketing-ui/assets/index.c0e1394e.js","/marketing-ui/assets/index.f9cb9bdf.css","/marketing-ui/assets/vendor.4fe08a48.js","/marketing-ui/assets/useRotate.9fd7a603.js"])},v=/.\/views\/components\/([\W\w]+)\/index.tsx/;let g,A,y;const w={},_=Object.keys(m).map((t=>(g=v.exec(t),g&&(A=g[1]),y="/"+A.toLocaleLowerCase(),w[y]={path:y,title:A},{path:y,name:A,component:m[t],meta:{name:A}}))),x=t({history:e(),routes:[{path:"/",name:"首页",component:()=>p((()=>import("./index.c62f26c1.js")),["/marketing-ui/assets/index.c62f26c1.js","/marketing-ui/assets/index.74857734.css","/marketing-ui/assets/vendor.4fe08a48.js"]),meta:{name:"首页"}},..._]}),k=[{name:"互动组件",children:_.map((t=>({title:t.name,path:t.path})))}];var b=n({render:()=>i(r,null,[i(o,null,null)])}),E=n({name:"mk-coating",render:function(){return i("canvas",{class:"mk-coating"},null)}});function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=t.$slots[e];return n?n():""}E.install=function(t){t.component(E.name,E)};var O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArEAAAGSAQMAAADOxAtrAAAAA1BMVEWXl5cPTYmVAAAAOUlEQVR42u3BgQAAAADDoPtT32AE1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIB4owAAGsmJ4nAAAAAElFTkSuQmCC";function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;return new Promise((function(n){var i=new Image;i.crossOrigin="anonymous",i.onerror=function(){i.src=e,i.onload=function(){i.onload=null,n(i)},i.onerror=null},i.onload=function(){i.onerror=null,n(i)},i.src=t}))}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout(e,t)}))}var S=n({props:{row:{type:Number,default:3},size:{type:Number,default:100}},setup:function(t){return{top:s((function(){return{height:t.size+"px"}})),right:s((function(){return{top:t.size+"px",height:(t.row-2)*t.size+"px",width:t.size+"px"}})),bottom:s((function(){return{height:t.size+"px",top:(t.row-1)*t.size+"px"}})),left:s((function(){return{top:t.size+"px",width:t.size+"px",height:(t.row-2)*t.size+"px"}}))}},render:function(){return i("div",{class:"mk-grids-wrapper"},[i("div",{style:this.top,class:"mk-grids-wrapper__top"},[R(this,"top")]),i("div",{style:this.right,class:"mk-grids-wrapper__right"},[R(this,"right")]),i("div",{style:this.bottom,class:"mk-grids-wrapper__bottom"},[R(this,"bottom")]),i("div",{style:this.left,class:"mk-grids-wrapper__left"},[R(this,"left")])])}});var C=n({name:"mk-grids",props:{row:{type:Number,default:3},options:{type:Array}},setup:function(t){var e=u(0),n=u();return a((function(){if(0===e.value){var i=n.value.$el.parentNode.getBoundingClientRect();e.value=i.width/t.row}})),{setRef:function(t){n.value=t},size:e}},render:function(){var t=this,e=R(this)[0].children;return e.forEach((function(e){e.el&&(e.el.style.width=t.size+"px",e.el.style.height=t.size+"px")})),e=function(t,e){return[t.slice(0,e),t.slice(e,2*e-2),t.slice(2*e-2,3*e-2),t.slice(3*e-2,4*e-4)]}(e,this.row),i(S,{size:this.size,row:this.row,ref:this.setRef},{top:function(){return e[0]},right:function(){return e[1]},bottom:function(){return e[2]},left:function(){return e[3]}})}});C.install=function(t){t.component(C.name,C)};var z,I,D=n({name:"mk-wheel",props:{angle:{type:Number,default:0},size:{type:Number,default:0}},setup:function(t){var e=u(t.size),n=u(),i=s((function(){return{transform:"rotate3d(0, 0, 1, ".concat(t.angle,"deg)"),width:(t.size||e.value)+"px",height:(t.size||e.value)+"px"}}));return a((function(){if(0===e.value){var t=n.value.parentNode.getBoundingClientRect();e.value=t.width}})),{setRef:function(t){n.value=t},wheelStyle:i}},render:function(){return i("div",{style:this.wheelStyle,class:"mk-wheel",ref:this.setRef},[R(this)])}}),L=n({name:"mk-wheel-option",props:{index:{type:Number,default:0},title:{type:String,default:""},image:{type:String,default:""}},setup:function(t,e){return{optionStyle:s((function(){return{transform:"rotate(".concat(15+60*t.index,"deg) skew(15deg, 15deg)")}})),onClick:function(){e.emit("click",t.index)}}},render:function(){return i("div",{onClick:this.onClick,style:this.optionStyle,class:"mk-wheel-option"},[i("div",{class:"mk-wheel-option__revert"},[this.title&&i("div",{class:"mk-wheel-option__title"},[this.title]),this.image&&i("img",{class:"mk-wheel-option__image",src:this.image,alt:this.title},null),R(this)])])}});function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Q(t);if(e){var o=Q(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return X(this,n)}}function X(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?M(t):e}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}D.install=function(t){t.component(D.name,D),t.component(L.name,L)},D.Option=L,(I=z||(z={}))[I.INIT=0]="INIT",I[I.READY=1]="READY",I[I.START=2]="START",I[I.OVER=3]="OVER";var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(r,c);var e,n,i,o=B(r);function r(){var t;N(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return W(M(t=o.call.apply(o,[this].concat(n))),"_status",z.INIT),t}return e=r,(n=[{key:"ctx",get:function(){return this._ctx}},{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"offsetX",get:function(){return this._offsetX}},{key:"offsetY",get:function(){return this._offsetY}},{key:"dpr",get:function(){return this._dpr}},{key:"status",get:function(){return this._status}},{key:"el",get:function(){return this._el}},{key:"init",value:function(t){var e=this,n=t.el,i=t.dpr,o=t.coating;"string"==typeof n&&(n=document.querySelector(n)),this._ctx=n.getContext("2d"),this._dpr=i||window.devicePixelRatio,this._el=n,this.reset(o),this._el.addEventListener("touchstart",(function(t){e.emit("touchstart",t)})),this._el.addEventListener("touchmove",(function(t){e.emit("touchmove",t)})),this._el.addEventListener("touchend",(function(t){e.emit("touchend",t)})),this._el.addEventListener("mousedown",(function(t){e.emit("touchstart",t)})),this._el.addEventListener("mousemove",(function(t){e.emit("touchmove",t)})),this._el.addEventListener("mouseup",(function(t){e.emit("touchend",t)}))}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.coating,e=this.el,n=this.dpr,i=e.parentNode,o=i.offsetWidth,s=i.offsetHeight,u=e.getBoundingClientRect(),a=u.left,c=u.top;e.width=o*n,e.height=s*n,this._offsetX=a,this._offsetY=c,this._w=e.width,this._h=e.height,this.clear(),this._status=z.READY,this.drawCoating(t)}},{key:"onTouchstart",value:function(t){var e=this;this.on("touchstart",(function(n){n.preventDefault(),e.status!==z.OVER&&(e._status=z.START,t(n))}))}},{key:"onTouchmove",value:function(t){var e=this;this.on("touchmove",(function(n){if(n.preventDefault(),e.status===z.START){var i=0,o=0;if("touchmove"===n.type){var r=n.touches[0];i=r.clientX,o=r.clientY}else{var s=n;i=s.clientX,o=s.clientY}t(n,i,o)}}))}},{key:"onTouchend",value:function(t){this.on("touchend",(function(e){e.preventDefault(),t(e)}))}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height),this._status=z.OVER}},{key:"drawCoating",value:function(t){return-1!==t.indexOf("#")?(this.drawRect(t),Promise.resolve()):this.drawImage(t)}},{key:"drawRect",value:function(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)}},{key:"drawImage",value:function(t){var e=this;return P(t).then((function(t){e.ctx.drawImage(t,0,0,e.width,e.height)})).catch()}},{key:"scrapeoff",value:function(t,e,n){n||(n=15*this.dpr),this.ctx.globalCompositeOperation="destination-out",this.drawCircle((t-this.offsetX)*this.dpr,(e-this.offsetY)*this.dpr,n)}},{key:"drawCircle",value:function(t,e,n){this.ctx.beginPath(),this.ctx.arc(t,e,n,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()}},{key:"getPixelData",value:function(t){return this.ctx.getImageData(t/2,t/2,this.width-t/2,this.height-t/2).data}},{key:"calculateCoating",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getPixelData(t),n=0,i=0;i<e.length;i++)0===e[i]&&n++;return n/e.length}},{key:"createAutoPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.08,i=[],o=this.height*(1-2*e),r=3,s=this.height*n,u=0;u<=r;u++)i.push([this.width*t,o/r*u+this.height*e]),i.push([this.width*(1-t),o/r*u+this.height*e-s]);return i}},{key:"autoScrapeoff",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return t||(t=this.createAutoPoints()),new Promise((function(i){for(var o=function(o){T(o*n).then((function(){l({from:{x:t[o][0],y:t[o][1]},to:{x:t[o+1][0],y:t[o+1][1]},duration:n,onUpdate:function(t){var n=t.x,i=t.y;e.scrapeoff(n/e.dpr+e.offsetX,i/e.dpr+e.offsetY)},onComplete:function(){i(o)}})}))},r=0;r<t.length-1;r++)o(r)}))}}])&&V(e.prototype,n),i&&V(e,i),r}();function G(){return new $}W($,"coating","#979797");var U=[E,C,D];var q={install:function(t){U.forEach((function(e){e.install?t.use(e):e.name&&t.component(e.name,e)}))}};function F(t,e="default"){const n=t.$slots[e];return n?n():""}function H(t=6,e=0){return Math.floor(Math.random()*(t-e))+e}function J(t,e=2e3){return new Promise((n=>{setTimeout((()=>{n({code:0,success:Math.random()>.5,data:t})}),e)}))}function K(t=1e3){return new Promise((e=>{setTimeout(e,t)}))}var Z=n({name:"demo-block",render(){return i("div",{class:"demo-block"},[F(this)])}});const tt=h(b);tt.use(q),tt.component(Z.name,Z),tt.use(x).mount("#app");export{K as d,J as f,k as h,P as i,H as r,G as u};
